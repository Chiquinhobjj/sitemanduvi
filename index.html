<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Instituto Manduvi - SocialTech que Transforma Vidas</title>
    <meta name="description" content="Instituto Manduvi - SocialTech que transforma vidas e comunidades. Inspirados na for√ßa da √°rvore Manduvi, desenvolvemos solu√ß√µes sustent√°veis com impacto duradouro no Pantanal e al√©m." />
  <meta name="keywords" content="instituto manduvi, socialtech, impacto social, pantanal, cuiab√°, mato grosso, sustentabilidade, inova√ß√£o social" />
  <script>
    // Script de EMERG√äNCIA - executa ANTES de qualquer coisa
    (function() {
      // Bloquear StorageType.persistent IMEDIATAMENTE
      if (typeof window !== 'undefined') {
        window.StorageType = {
          PERSISTENT: 'persistent',
          TEMPORARY: 'temporary',
          persistent: 'persistent'
        };
        console.log('üö® EMERG√äNCIA: StorageType.persistent bloqueado');
      }
    })();
  </script>
  <script>
    // Polyfill ULTRA agressivo - executa ANTES de qualquer coisa
    (function() {
      'use strict';
      
      // 1. Bloquear StorageType.persistent COMPLETAMENTE
      if (typeof window !== 'undefined') {
        // Substituir StorageType ANTES de qualquer acesso
        window.StorageType = {
          PERSISTENT: 'persistent',
          TEMPORARY: 'temporary'
        };
        
        // 2. Interceptar TODOS os acessos a StorageType.persistent
        let storageTypeProxy = new Proxy(window.StorageType, {
          get(target, prop) {
            if (prop === 'persistent') {
              console.warn('üö´ StorageType.persistent BLOQUEADO - retornando fallback');
              return 'persistent';
            }
            return target[prop];
          },
          set(target, prop, value) {
            if (prop === 'persistent') {
              console.warn('üö´ Tentativa de definir StorageType.persistent BLOQUEADA');
              return true;
            }
            target[prop] = value;
            return true;
          }
        });
        
        window.StorageType = storageTypeProxy;
        
        // 3. Interceptar Object.defineProperty para StorageType
        const originalDefineProperty = Object.defineProperty;
        Object.defineProperty = function(obj, prop, descriptor) {
          if (obj === window.StorageType && prop === 'persistent') {
            console.warn('üö´ defineProperty StorageType.persistent BLOQUEADO');
            return obj;
          }
          return originalDefineProperty.call(this, obj, prop, descriptor);
        };
        
        // 4. Interceptar Object.getOwnPropertyDescriptor
        const originalGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
        Object.getOwnPropertyDescriptor = function(obj, prop) {
          if (obj === window.StorageType && prop === 'persistent') {
            console.warn('üö´ getOwnPropertyDescriptor StorageType.persistent BLOQUEADO');
            return {
              value: 'persistent',
              writable: false,
              enumerable: true,
              configurable: false
            };
          }
          return originalGetOwnPropertyDescriptor.call(this, obj, prop);
        };
        
        // 5. Garantir navigator.storage
        if (!window.navigator.storage) {
          window.navigator.storage = {};
        }
        
        window.navigator.storage.persist = function() {
          console.log('üîÑ navigator.storage.persist chamado - retornando true');
          return Promise.resolve(true);
        };
        
        window.navigator.storage.estimate = function() {
          console.log('üîÑ navigator.storage.estimate chamado');
          return Promise.resolve({ quota: 50000000, usage: 0 });
        };
        
        console.log('üõ°Ô∏è Storage polyfill ULTRA agressivo aplicado');
      }
    })();
  </script>
  <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js" async></script>
  
  <!-- Instagram Embed Script -->
  <script async src="//www.instagram.com/embed.js"></script>
  
  <!-- Facebook SDK -->
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v18.0" nonce=""></script>
  
  <!-- LinkedIn Embed Script -->
  <script src="https://platform.linkedin.com/in.js" type="text/javascript">lang: pt_BR</script>
  
  <!-- YouTube Embed Script -->
  <script src="https://apis.google.com/js/api.js"></script>
  <script>
    // Script adicional para garantir que o polyfill seja aplicado ap√≥s o ChatKit carregar
    window.addEventListener('load', function() {
      // Re-aplicar polyfill se necess√°rio
      if (window.StorageType && window.StorageType.persistent) {
        console.log('üîÑ Re-aplicando polyfill ap√≥s carregamento');
        Object.defineProperty(window.StorageType, 'persistent', {
          get: function() {
            console.warn('üö´ StorageType.persistent acessado ap√≥s carregamento - retornando fallback');
            return 'persistent';
          },
          configurable: true
        });
      }
    });
  </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
